---
import Button from "./Button.astro";
import ScheduleModal from "./ScheduleModal.astro";
import ArrowRight from "@/components/icons/ArrowRight.astro";
interface Props {
    showIcon?: boolean;
    class?: string;
    variant?: 'primary' | 'secondary';
}

const { 
    class: className = '',
    variant = 'primary',
    showIcon = false
} = Astro.props;

// Generar un ID único para cada instancia del botón
const uniqueId = `schedule-button-${Math.random().toString(36).substring(2, 11)}`;
---

<div class="relative group">
    <Button
        href="#"
        variant={variant}
        class={className}
        id={uniqueId}
        icon={showIcon}
    >
        <slot />
    </Button>
    <ScheduleModal buttonId={uniqueId} />
</div>

<script>
    function initScheduleButton() {
        // Seleccionar todos los botones de programación
        const buttons = document.querySelectorAll('[id^="schedule-button-"]');
        
        buttons.forEach(button => {
            const buttonId = button.id;
            const modal = document.querySelector(`[data-button-id="${buttonId}"]`);
            
            button?.addEventListener('click', (e) => {
                e.preventDefault();
                modal?.classList.remove('opacity-0', 'pointer-events-none');
            });
        });
    }

    // Initialize on page load
    document.addEventListener('astro:page-load', initScheduleButton);
</script> 
